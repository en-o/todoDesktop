# Todo Desktop App - é¡¹ç›®æ€»ç»“

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº **Tauri + React + Rust** çš„æ¡Œé¢ Todo ç®¡ç†åº”ç”¨ï¼Œä½¿ç”¨ Git ä½œä¸ºæ•°æ®å­˜å‚¨å’Œç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚

## æ ¸å¿ƒç‰¹æ€§

âœ… **å·²å®ç°åŠŸèƒ½**:

1. **ä¸‰çº§æ—¥å†å¯¼èˆª**
   - å¹´è§†å›¾ï¼šæ˜¾ç¤º 12 ä¸ªæœˆä»½ï¼Œå·²æœ‰ Todo çš„æœˆä»½ä¼šé«˜äº®
   - æœˆè§†å›¾ï¼šæ—¥å†å½¢å¼å±•ç¤ºï¼Œå·²æœ‰ Todo çš„æ—¥æœŸæ˜¾ç¤ºç»¿ç‚¹
   - æ—¥è§†å›¾ï¼šMarkdown ç¼–è¾‘å™¨ï¼Œæ”¯æŒç¼–è¾‘å’Œé¢„è§ˆ

2. **Git ç‰ˆæœ¬æ§åˆ¶**
   - æœ¬åœ° Git ä»“åº“åˆå§‹åŒ–
   - è‡ªåŠ¨æäº¤ï¼ˆæ¯æ¬¡ä¿å­˜è‡ªåŠ¨ commitï¼‰
   - æ‰‹åŠ¨åŒæ­¥ï¼ˆpush/pullï¼‰
   - æ”¯æŒ GitHub/GitLab/Gitee

3. **Markdown æ”¯æŒ**
   - å®Œæ•´çš„ Markdown è¯­æ³•
   - å®æ—¶é¢„è§ˆ
   - å¾…åŠäº‹é¡¹åˆ—è¡¨ï¼ˆcheckboxï¼‰

4. **é…ç½®ç®¡ç†**
   - æŒä¹…åŒ–é…ç½®å­˜å‚¨
   - ç”¨æˆ·ä¿¡æ¯é…ç½®
   - è¿œç¨‹ä»“åº“é…ç½®
   - GitHub Pages å¼€å…³

## æŠ€æœ¯æ¶æ„

### å‰ç«¯ (React + TypeScript)

```
src/
â”œâ”€â”€ App.tsx              # ä¸»åº”ç”¨
â”œâ”€â”€ components/          # ç»„ä»¶
â”‚   â””â”€â”€ Layout.tsx       # å¸ƒå±€
â”œâ”€â”€ pages/               # é¡µé¢
â”‚   â”œâ”€â”€ YearView.tsx     # å¹´è§†å›¾
â”‚   â”œâ”€â”€ MonthView.tsx    # æœˆè§†å›¾
â”‚   â”œâ”€â”€ DayView.tsx      # æ—¥è§†å›¾
â”‚   â””â”€â”€ Settings.tsx     # è®¾ç½®
â””â”€â”€ store/               # çŠ¶æ€ç®¡ç†
    â””â”€â”€ configStore.ts   # é…ç½®çŠ¶æ€
```

**ä¾èµ–**:
- React 18
- Ant Design (UI)
- React Router (è·¯ç”±)
- Zustand (çŠ¶æ€)
- React Markdown (æ¸²æŸ“)
- Day.js (æ—¥æœŸ)

### åç«¯ (Rust)

```
src-tauri/src/
â”œâ”€â”€ main.rs              # ä¸»å…¥å£ + IPC
â”œâ”€â”€ git_manager.rs       # Git æ“ä½œ
â”œâ”€â”€ file_manager.rs      # æ–‡ä»¶æ“ä½œ
â””â”€â”€ config.rs            # é…ç½®å®šä¹‰
```

**ä¾èµ–**:
- Tauri 1.5
- git2 (Git æ“ä½œ)
- serde (åºåˆ—åŒ–)

## æ•°æ®ç»“æ„

### æ–‡ä»¶ç»„ç»‡

```
todo-data/
â”œâ”€â”€ 2024/
â”‚   â”œâ”€â”€ 01/
â”‚   â”‚   â”œâ”€â”€ 01.md
â”‚   â”‚   â”œâ”€â”€ 02.md
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ 02/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ 2025/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ attachments/         # æœªæ¥åŠŸèƒ½
â””â”€â”€ .git/                # Git ä»“åº“
```

### é…ç½®æ–‡ä»¶

å­˜å‚¨ä½ç½®: 
- Windows: `%APPDATA%/com.todo.desktop/config.json`
- macOS: `~/Library/Application Support/com.todo.desktop/config.json`
- Linux: `~/.config/com.todo.desktop/config.json`

```json
{
  "localPath": "/path/to/todo-data",
  "userName": "Your Name",
  "userEmail": "your@email.com",
  "remoteUrl": "https://github.com/user/repo.git",
  "token": "ghp_xxx",
  "gitProvider": "github",
  "enableGithubPages": false
}
```

## API è®¾è®¡

### Tauri Commands

| å‘½ä»¤ | å‚æ•° | è¿”å›å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `init_git` | `config: Config` | `Result<String>` | åˆå§‹åŒ– Git ä»“åº“ |
| `read_file` | `filepath: String` | `Result<String>` | è¯»å–æ–‡ä»¶å†…å®¹ |
| `write_file` | `filepath, content: String` | `Result<String>` | å†™å…¥æ–‡ä»¶å¹¶æäº¤ |
| `list_files` | `dirpath: String` | `Result<Vec<String>>` | åˆ—å‡ºç›®å½•æ–‡ä»¶ |
| `git_push` | - | `Result<String>` | æ¨é€åˆ°è¿œç¨‹ |
| `git_pull` | - | `Result<String>` | ä»è¿œç¨‹æ‹‰å– |
| `save_config` | `config: Config` | `Result<String>` | ä¿å­˜é…ç½® |
| `load_config` | - | `Result<Option<Config>>` | åŠ è½½é…ç½® |

## å·¥ä½œæµç¨‹

### 1. åˆæ¬¡ä½¿ç”¨

```
å¯åŠ¨åº”ç”¨
  â†“
è¿›å…¥è®¾ç½®é¡µé¢
  â†“
é…ç½®æœ¬åœ°è·¯å¾„ã€Git ä¿¡æ¯
  â†“
ï¼ˆå¯é€‰ï¼‰é…ç½®è¿œç¨‹ä»“åº“
  â†“
ä¿å­˜å¹¶åˆå§‹åŒ–
  â†“
å¼€å§‹ä½¿ç”¨
```

### 2. æ—¥å¸¸ç¼–è¾‘

```
å¹´è§†å›¾ â†’ é€‰æ‹©æœˆä»½
  â†“
æœˆè§†å›¾ â†’ é€‰æ‹©æ—¥æœŸ
  â†“
æ—¥è§†å›¾ â†’ ç¼–è¾‘ Markdown
  â†“
ä¿å­˜ï¼ˆè‡ªåŠ¨ Git commitï¼‰
  â†“
ï¼ˆå¯é€‰ï¼‰ç‚¹å‡»åŒæ­¥æŒ‰é’®
```

### 3. æ•°æ®åŒæ­¥

```
ç‚¹å‡»åŒæ­¥æŒ‰é’®
  â†“
git pull (æ‹‰å–è¿œç¨‹æ›´æ”¹)
  â†“
git push (æ¨é€æœ¬åœ°æ›´æ”¹)
  â†“
åŒæ­¥å®Œæˆ
```

## ä¼˜åŠ¿

1. **æ•°æ®å®‰å…¨**: Git ç‰ˆæœ¬æ§åˆ¶ï¼Œå®Œæ•´å†å²è®°å½•
2. **è·¨å¹³å°**: Windowsã€macOSã€Linux å…¨æ”¯æŒ
3. **ç¦»çº¿ä¼˜å…ˆ**: æ— éœ€ç½‘ç»œå³å¯ä½¿ç”¨
4. **è½»é‡é«˜æ•ˆ**: Tauri æ¯” Electron æ›´å°æ›´å¿«
5. **çµæ´»å­˜å‚¨**: æ”¯æŒå¤šä¸ª Git å¹³å°
6. **å¼€æºé€æ˜**: ä»£ç å®Œå…¨å¼€æº

## æœªæ¥æ‰©å±•

ğŸ“‹ **è®¡åˆ’åŠŸèƒ½**:

1. **é™„ä»¶ç®¡ç†**
   - ä¸Šä¼ å›¾ç‰‡ã€æ–‡ä»¶
   - è‡ªåŠ¨å‹ç¼©å›¾ç‰‡
   - é™„ä»¶ç‰ˆæœ¬æ§åˆ¶

2. **å¢å¼ºç¼–è¾‘**
   - è¯­æ³•é«˜äº®
   - å¿«æ·é”®æ”¯æŒ
   - è‡ªåŠ¨ä¿å­˜

3. **æœç´¢åŠŸèƒ½**
   - å…¨æ–‡æœç´¢
   - æ ‡ç­¾è¿‡æ»¤
   - æ—¥æœŸèŒƒå›´

4. **å¯¼å‡ºåŠŸèƒ½**
   - å¯¼å‡ºä¸º PDF
   - å¯¼å‡ºä¸º HTML
   - æ‰¹é‡å¯¼å‡º

5. **GitHub Pages**
   - è‡ªåŠ¨ç”Ÿæˆé™æ€ç«™ç‚¹
   - ä¸»é¢˜å®šåˆ¶
   - è¯„è®ºç³»ç»Ÿ

6. **UI å¢å¼º**
   - æš—è‰²æ¨¡å¼
   - ä¸»é¢˜åˆ‡æ¢
   - è‡ªå®šä¹‰æ ·å¼

7. **åä½œåŠŸèƒ½**
   - å†²çªè§£å†³
   - åˆ†æ”¯ç®¡ç†
   - å¤šäººåä½œ

## å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘

```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼
npm run tauri:dev

# æ„å»º
npm run tauri:build
```

### æ·»åŠ åŠŸèƒ½

1. **å‰ç«¯é¡µé¢**: åœ¨ `src/pages/` æ·»åŠ ç»„ä»¶
2. **åç«¯åŠŸèƒ½**: åœ¨ `src-tauri/src/` æ·»åŠ æ¨¡å—
3. **çŠ¶æ€ç®¡ç†**: åœ¨ `src/store/` æ·»åŠ  store
4. **è·¯ç”±**: åœ¨ `App.tsx` æ·»åŠ è·¯ç”±

### è°ƒè¯•

- **å‰ç«¯**: æµè§ˆå™¨ DevTools
- **åç«¯**: Rust æ—¥å¿—è¾“å‡º
- **IPC**: æŸ¥çœ‹å‘½ä»¤è°ƒç”¨å’Œè¿”å›å€¼

## éƒ¨ç½²

### ç”¨æˆ·å®‰è£…

1. ä¸‹è½½å¯¹åº”å¹³å°çš„å®‰è£…åŒ…
2. è¿è¡Œå®‰è£…ç¨‹åº
3. é¦–æ¬¡å¯åŠ¨é…ç½®
4. å¼€å§‹ä½¿ç”¨

### æ„å»ºåˆ†å‘

```bash
npm run tauri:build
```

è¾“å‡ºä½ç½®:
- Windows: `src-tauri/target/release/bundle/msi/`
- macOS: `src-tauri/target/release/bundle/dmg/`
- Linux: `src-tauri/target/release/bundle/appimage/`

## å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆé€‰æ‹© Tauri è€Œä¸æ˜¯ Electron?

A: Tauri çš„ä¼˜åŠ¿:
- æ›´å°çš„åŒ…ä½“ç§¯ (~3MB vs ~150MB)
- æ›´ä½çš„å†…å­˜å ç”¨
- æ›´å¥½çš„æ€§èƒ½
- åŸç”Ÿç³»ç»Ÿé›†æˆ

### Q: æ•°æ®å­˜å‚¨åœ¨å“ªé‡Œ?

A: ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æœ¬åœ°ç›®å½•ï¼Œæ‰€æœ‰æ•°æ®ä»¥ Markdown æ–‡ä»¶å½¢å¼å­˜å‚¨ã€‚

### Q: å¦‚ä½•å¤‡ä»½æ•°æ®?

A: 
1. é…ç½®è¿œç¨‹ Git ä»“åº“è‡ªåŠ¨å¤‡ä»½
2. æ‰‹åŠ¨å¤åˆ¶æœ¬åœ°æ•°æ®ç›®å½•
3. ä½¿ç”¨äº‘å­˜å‚¨åŒæ­¥ç›®å½•

### Q: æ”¯æŒå“ªäº› Markdown è¯­æ³•?

A: æ”¯æŒ GitHub Flavored Markdown (GFM)ï¼ŒåŒ…æ‹¬:
- æ ‡é¢˜ã€åˆ—è¡¨ã€è¡¨æ ¼
- ä»£ç å—ã€å¼•ç”¨
- ä»»åŠ¡åˆ—è¡¨ (checkbox)
- é“¾æ¥ã€å›¾ç‰‡

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request!

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## è‡´è°¢

- Tauri Team
- React Team
- Ant Design Team
- git2-rs Contributors

---

**é¡¹ç›®çŠ¶æ€**: âœ… æ ¸å¿ƒåŠŸèƒ½å®Œæˆï¼Œå¯ç”¨äºæ—¥å¸¸ä½¿ç”¨

**ä¸‹ä¸€æ­¥**: æ·»åŠ é™„ä»¶ç®¡ç†ã€æœç´¢åŠŸèƒ½ã€GitHub Pages é›†æˆ
